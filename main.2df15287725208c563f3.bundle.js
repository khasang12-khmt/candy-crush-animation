(()=>{"use strict";var e,t={773:(e,t,i)=>{i(260);class s extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(10016391),this.createLoadingbar(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(16774867,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload")}update(){this.scene.start("GameScene")}createLoadingbar(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(6139463,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}const r={score:0,highscore:0,gridWidth:8,gridHeight:8,tileWidth:64,tileHeight:72,candyTypes:["cookie1","cookie2","croissant","cupcake","donut","eclair","macaroon","pie","poptart1","poptart2","starcookie1","starcookie2"]};class h extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.setOrigin(0,0),this.setInteractive(),this.scene.add.existing(this)}}class l extends Phaser.Scene{constructor(){super({key:"GameScene"})}init(){this.canMove=!0,this.cameras.main.setBackgroundColor(7908062),this.tileGrid=[];for(let e=0;e<r.gridHeight;e++){this.tileGrid[e]=[];for(let t=0;t<r.gridWidth;t++)this.tileGrid[e][t]=this.addTile(t,e)}this.input.on("gameobjectdown",this.tileDown,this),this.checkMatches()}addTile(e,t){const i=r.candyTypes[Phaser.Math.RND.between(0,r.candyTypes.length-1)];return new h({scene:this,x:e*r.tileWidth,y:t*r.tileHeight,texture:i})}tileDown(e,t,i){if(this.canMove)if(this.firstSelectedTile){if(this.secondSelectedTile=t,this.secondSelectedTile){const e=Math.abs(this.firstSelectedTile.x-this.secondSelectedTile.x)/r.tileWidth,t=Math.abs(this.firstSelectedTile.y-this.secondSelectedTile.y)/r.tileHeight;(1===e&&0===t||0===e&&1===t)&&(this.canMove=!1,this.swapTiles())}}else this.firstSelectedTile=t}swapTiles(){if(this.firstSelectedTile&&this.secondSelectedTile){const e={x:this.firstSelectedTile.x,y:this.firstSelectedTile.y},t={x:this.secondSelectedTile.x,y:this.secondSelectedTile.y};this.tileGrid[e.y/r.tileHeight][e.x/r.tileWidth]=this.secondSelectedTile,this.tileGrid[t.y/r.tileHeight][t.x/r.tileWidth]=this.firstSelectedTile,this.add.tween({targets:this.firstSelectedTile,x:this.secondSelectedTile.x,y:this.secondSelectedTile.y,ease:"Linear",duration:400,repeat:0,yoyo:!1}),this.add.tween({targets:this.secondSelectedTile,x:this.firstSelectedTile.x,y:this.firstSelectedTile.y,ease:"Linear",duration:400,repeat:0,yoyo:!1,onComplete:()=>{this.checkMatches()}}),this.firstSelectedTile=this.tileGrid[e.y/r.tileHeight][e.x/r.tileWidth],this.secondSelectedTile=this.tileGrid[t.y/r.tileHeight][t.x/r.tileWidth]}}checkMatches(){const e=this.getMatches(this.tileGrid);e.length>0?(this.removeTileGroup(e),this.resetTile(),this.fillTile(),this.tileUp(),this.checkMatches()):(this.swapTiles(),this.tileUp(),this.canMove=!0)}resetTile(){for(let e=this.tileGrid.length-1;e>0;e--)for(let t=this.tileGrid[e].length-1;t>0;t--)if(void 0===this.tileGrid[e][t]&&void 0!==this.tileGrid[e-1][t]){const i=this.tileGrid[e-1][t];this.tileGrid[e][t]=i,this.tileGrid[e-1][t]=void 0,this.add.tween({targets:i,y:r.tileHeight*e,ease:"Linear",duration:200,repeat:0,yoyo:!1}),t=this.tileGrid[e].length}}fillTile(){for(let e=0;e<this.tileGrid.length;e++)for(let t=0;t<this.tileGrid[e].length;t++)if(void 0===this.tileGrid[e][t]){const i=this.addTile(t,e);this.tileGrid[e][t]=i}}tileUp(){this.firstSelectedTile=void 0,this.secondSelectedTile=void 0}removeTileGroup(e){for(const t of e){const e=t;for(const t of e){const e=t,i=this.getTilePos(this.tileGrid,e);-1!==i.x&&-1!==i.y&&(e.destroy(),this.tileGrid[i.y][i.x]=void 0)}}}getTilePos(e,t){const i={x:-1,y:-1};for(let s=0;s<e.length;s++)for(let r=0;r<e[s].length;r++)if(t===e[s][r]){i.x=r,i.y=s;break}return i}getMatches(e){const t=[];let i=[];for(const s of e){const e=s;i=[];for(let r=0;r<e.length;r++)r<e.length-2&&s[r]&&s[r+1]&&s[r+2]&&s[r].texture.key===s[r+1].texture.key&&s[r+1].texture.key===s[r+2].texture.key&&(i.length>0&&-1==i.indexOf(s[r])&&(t.push(i),i=[]),-1==i.indexOf(s[r])&&i.push(s[r]),-1==i.indexOf(s[r+1])&&i.push(s[r+1]),-1==i.indexOf(s[r+2])&&i.push(s[r+2]));i.length>0&&t.push(i)}for(let s=0;s<e.length;s++){const r=e[s];i=[];for(let h=0;h<r.length;h++)h<r.length-2&&e[h][s]&&e[h+1][s]&&e[h+2][s]&&e[h][s].texture.key===e[h+1][s].texture.key&&e[h+1][s].texture.key===e[h+2][s].texture.key&&(i.length>0&&-1==i.indexOf(e[h][s])&&(t.push(i),i=[]),-1==i.indexOf(e[h][s])&&i.push(e[h][s]),-1==i.indexOf(e[h+1][s])&&i.push(e[h+1][s]),-1==i.indexOf(e[h+2][s])&&i.push(e[h+2][s]));i.length>0&&t.push(i)}return t}}const a={title:"Candy crush",url:"https://github.com/digitsensitive/phaser3-typescript",version:"2.0",width:520,height:700,type:Phaser.AUTO,parent:"game",scene:[s,l],scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},backgroundColor:"#de3412",render:{pixelArt:!1,antialias:!0}};class o extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new o(a)}))}},i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var h=i[e]={exports:{}};return t[e].call(h.exports,h,h.exports,s),h.exports}s.m=t,e=[],s.O=(t,i,r,h)=>{if(!i){var l=1/0;for(d=0;d<e.length;d++){for(var[i,r,h]=e[d],a=!0,o=0;o<i.length;o++)(!1&h||l>=h)&&Object.keys(s.O).every((e=>s.O[e](i[o])))?i.splice(o--,1):(a=!1,h<l&&(l=h));if(a){e.splice(d--,1);var n=r();void 0!==n&&(t=n)}}return t}h=h||0;for(var d=e.length;d>0&&e[d-1][2]>h;d--)e[d]=e[d-1];e[d]=[i,r,h]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var r,h,[l,a,o]=i,n=0;if(l.some((t=>0!==e[t]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(o)var d=o(s)}for(t&&t(i);n<l.length;n++)h=l[n],s.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return s.O(d)},i=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=s.O(void 0,[216],(()=>s(773)));r=s.O(r)})();